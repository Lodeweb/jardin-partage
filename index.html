<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JardinPartage - Partage d'outils de jardinage communautaire</title>
    <link href='https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.css' rel='stylesheet' />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ... (tout le CSS de la version originale, raccourci ici pour lisibilité) ... */
        :root { --primary: #2e7d32; --primary-dark: #005005; --secondary: #ff9800; --light-gray: #e0e0e0;}
        * {margin:0; padding:0; box-sizing:border-box; font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;}
        body {background:#f8f9fa; color:#333;}
        header {background:#fff; box-shadow:0 2px 10px #0001; position:sticky;top:0;z-index:100;}
        .navbar {display:flex;justify-content:space-between;align-items:center;padding:1rem 5%;max-width:1400px;margin:0 auto;}
        .logo {display:flex;align-items:center;gap:10px;}
        .logo i {font-size:2rem;color:var(--primary);}
        .logo h1 {font-size:1.8rem;color:var(--primary);}
        .nav-links {display:flex;gap:2rem;}
        .nav-links a {text-decoration:none;color:#333;font-weight:500;}
        .nav-links a:hover,.nav-links a.active {color:var(--primary);}
        .auth-buttons {display:flex;gap:1rem;}
        .btn {padding:0.6rem 1.5rem;border-radius:50px;font-weight:600;cursor:pointer;transition:all 0.3s;border:none;}
        .btn-primary {background:var(--primary);color:#fff;}
        .btn-primary:hover {background:var(--primary-dark);}
        .btn-outline {background:transparent;border:2px solid var(--primary);color:var(--primary);}
        .btn-outline:hover {background:var(--primary);color:#fff;}
        .btn-secondary {background:var(--secondary);color:#fff;}
        .btn-secondary:hover {background:#e65100;}
        .hero {background:linear-gradient(rgba(0,0,0,.5),rgba(0,0,0,.5)),url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect width="100" height="100" fill="%232e7d32"/><path d="M20,20 Q40,5 60,20 T100,20 L100,80 Q80,95 60,80 T20,80 Z" fill="%2360ad5e"/></svg>');background-size:cover;background-position:center;color:#fff;text-align:center;padding:6rem 2rem;}
        .hero-content {max-width:800px;margin:0 auto;}
        .hero h2 {font-size:3rem;margin-bottom:1.5rem;text-shadow:0 2px 4px rgba(0,0,0,.3);}
        .hero p {font-size:1.2rem;margin-bottom:2rem;max-width:600px;margin-left:auto;margin-right:auto;}
        /* ... Raccourci : conserve toutes les autres sections/features/testimonials/footer de ta version initiale ... */
        .modal {display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,.7);z-index:1000;align-items:center;justify-content:center;}
        .modal-content {background:#fff;padding:2rem;border-radius:10px;width:90%;max-width:400px;}
        .close-modal {float:right;cursor:pointer;font-size:1.5rem;}
    </style>
</head>
<body>
    <header>
        <div class="navbar">
            <div class="logo">
                <i class="fas fa-leaf"></i>
                <h1>JardinPartage</h1>
            </div>
            <div class="nav-links">
                <a href="#" class="active">Accueil</a>
                <a href="#catalogue">Catalogue</a>
                <a href="#how-it-works">Comment ça marche</a>
                <a href="#proposer">Proposer un outil</a>
                <a href="#achats">Achats</a>
                <a href="#contact">Contact</a>
            </div>
            <div class="auth-buttons">
                <button class="btn btn-outline" id="loginBtn">Connexion</button>
                <button class="btn btn-primary" id="registerBtn">Inscription</button>
                <button class="btn btn-secondary" id="logoutBtn" style="display:none;">Déconnexion</button>
            </div>
        </div>
    </header>

    <!-- ... (hero, features, catalogue, purchase, how-it-works, testimonials, footer, etc.) ... -->
    <!-- Je les omets ici par souci de place, mais tu gardes tous tes blocs HTML précédents. -->

    <!-- Modale Connexion -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <span class="close-modal" id="closeLoginModal">&times;</span>
            <h2>Connexion</h2>
            <form id="loginForm">
                <div>
                    <label for="email">Email</label>
                    <input type="email" id="email" required style="width:100%">
                </div>
                <div>
                    <label for="password">Mot de passe</label>
                    <input type="password" id="password" required style="width:100%">
                </div>
                <button type="submit" class="btn btn-primary" style="width:100%;margin-top:1rem;">Se connecter</button>
            </form>
        </div>
    </div>
    <!-- Modale Inscription -->
    <div class="modal" id="registerModal">
        <div class="modal-content">
            <span class="close-modal" id="closeRegisterModal">&times;</span>
            <h2>Inscription</h2>
            <form id="registerForm">
                <div>
                    <label for="regEmail">Email</label>
                    <input type="email" id="regEmail" required style="width:100%">
                </div>
                <div>
                    <label for="regPassword">Mot de passe</label>
                    <input type="password" id="regPassword" required style="width:100%">
                </div>
                <button type="submit" class="btn btn-primary" style="width:100%;margin-top:1rem;">S'inscrire</button>
            </form>
        </div>
    </div>

    <!-- Scripts principaux -->
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.js'></script>
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/locales/fr.min.js'></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
    <script>
    // Config Supabase
    const supabaseUrl = 'https://vvwaoublturvwnepluav.supabase.co';
    const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ2d2FvdWJsdHVydnduZXBsdWF2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMxMDI5NzAsImV4cCI6MjA2ODY3ODk3MH0.X4NEPjWRze9hUToHquKVrL6ZdKQZznFjfXvNzPMIcTI';
    const supabase = supabase.createClient(supabaseUrl, supabaseKey);

    document.addEventListener('DOMContentLoaded', function() {
        // MODAL Gestion
        const loginModal = document.getElementById('loginModal');
        const registerModal = document.getElementById('registerModal');
        const loginBtn = document.getElementById('loginBtn');
        const registerBtn = document.getElementById('registerBtn');
        const logoutBtn = document.getElementById('logoutBtn');
        const closeLoginModal = document.getElementById('closeLoginModal');
        const closeRegisterModal = document.getElementById('closeRegisterModal');
        const loginForm = document.getElementById('loginForm');
        const registerForm = document.getElementById('registerForm');

        loginBtn.onclick = () => loginModal.style.display = "flex";
        closeLoginModal.onclick = () => loginModal.style.display = "none";
        registerBtn.onclick = () => registerModal.style.display = "flex";
        closeRegisterModal.onclick = () => registerModal.style.display = "none";
        window.onclick = (e) => {
            if(e.target === loginModal) loginModal.style.display = "none";
            if(e.target === registerModal) registerModal.style.display = "none";
        };

        // Inscription Supabase
        registerForm.onsubmit = async function(e) {
            e.preventDefault();
            const email = document.getElementById('regEmail').value;
            const password = document.getElementById('regPassword').value;
            const { error } = await supabase.auth.signUp({ email, password });
            if(error) {
                alert('Erreur inscription: ' + error.message);
            } else {
                alert('Inscription réussie, vérifie tes emails.');
                registerModal.style.display = "none";
            }
        };

        // Connexion Supabase
        loginForm.onsubmit = async function(e) {
            e.preventDefault();
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const { error } = await supabase.auth.signInWithPassword({ email, password });
            if(error) {
                alert('Erreur connexion: ' + error.message);
            } else {
                alert('Connexion réussie !');
                loginModal.style.display = "none";
                loginBtn.style.display = "none";
                registerBtn.style.display = "none";
                logoutBtn.style.display = "inline-block";
            }
        };

        // Déconnexion
        logoutBtn.onclick = async function() {
            await supabase.auth.signOut();
            loginBtn.style.display = "inline-block";
            registerBtn.style.display = "inline-block";
            logoutBtn.style.display = "none";
            alert('Déconnecté.');
        };

        // Affichage selon session
        supabase.auth.getSession().then(({ data }) => {
            if(data.session){
                loginBtn.style.display = "none";
                registerBtn.style.display = "none";
                logoutBtn.style.display = "inline-block";
            } else {
                loginBtn.style.display = "inline-block";
                registerBtn.style.display = "inline-block";
                logoutBtn.style.display = "none";
            }
        });
    });
    </script>
</body>
</html>
